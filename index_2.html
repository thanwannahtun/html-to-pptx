<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Myanmar ID Card Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Padauk:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>

    <style>
        body {
            font-family: 'Padauk', sans-serif;
            background-color: #555;
            /* Dark background to see the A4 page clearly */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;

        }

        /* A4 Page Container */
        .page {
            /* REPLACE 'template_background.jpg' with your actual image filename */
            background-image: url('template_background.png');
            background-size: 100% 100%;
            background-repeat: no-repeat;

            width: 210mm;
            height: 297mm;
            background-color: white;
            position: relative;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);

            /* Grid: 2 Columns x 4 Rows */
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: repeat(4, 1fr);

            /* Margins to align grid with the printed boxes on the image */
            /* Tweak these slightly if the alignment is off by a few millimeters */
            padding: 2mm;
            grid-gap: 2mm;
            box-sizing: border-box;


        }

        /* Individual Card Wrapper */
        .card {
            position: relative;
            /* margin-top: -1.8px; */
            width: 100%;
            height: 100%;
            /* border: 1px solid red; /* Uncomment this to debug alignment */
            /* background: blue; */
            /* opacity: 0.2; */

        }

        /* --- 1. BARCODE AREA --- */
        .barcode-box {
            position: absolute;
            /* Positioned to the RIGHT of the white photo box */
            /* top: 20%; */
            top: 29.5%;
            /* left: 38%; */
            left: 30%;
            width: 35%;
            /* width: 42%; */
            text-align: center;
        }

        .barcode-box svg {
            width: 90%;
            /* Make barcode fill the width */
            height: auto;
        }

        /* --- 2. TEXT INFO AREA --- */
        .info-box {
            position: absolute;
            /* Moved down to lower half of card */
            /* top: 56%; */
            top: 65%;
            left: 5%;
            width: 90%;

            font-size: 16px;
            /* Adjust font size */
            font-weight: bold;
            line-height: 1.9;
            /* Space between lines */
            color: #000;
        }

        /* --- 4. COLUMN SPECIFIC ADJUSTMENTS (THE FIX) --- */

        /* LEFT COLUMN (Odd numbers: 1, 3, 5, 7) */
        .card:nth-child(odd) .barcode-box {
            /* left: 31%;
            top: 27%; */
            left: 34%;
            top: 29.5%;
            /* Position for LEFT cards */
        }

        /* RIGHT COLUMN (Even numbers: 2, 4, 6, 8) */
        .card:nth-child(even) .barcode-box {
            /* left: 26.5%;
            top: 27%; */
            left: 30.5%;
            top: 29.5%;
            /* Position for RIGHT cards - Shifted Right to fix alignment */
        }

        /* Optional: If Right column text also needs moving */
        .card:nth-child(even) .info-box {
            left: 1%;
            /* Slight nudge right for text if needed */
        }

        /* Flexbox for rows to align Label : Value */
        .info-row {
            display: flex;
            align-items: flex-start;
        }

        .label {
            width: 38%;
            /* Width of the label column */
            color: #2e2e2e;
            position: relative;

            /* The Red Wavy Underline Effect */
            /* text-decoration: underline; */
            /* text-decoration-style: wavy; */
            /* text-decoration-color: red; */
            /* text-underline-offset: 3px; */
        }

        .val {
            width: 62%;
            padding-left: 5px;
        }

        /* Print Settings */
        @media print {
            body {
                background: none;
                padding: 0;
            }

            .page {
                width: 210mm;
                height: 297mm;
                box-shadow: none;
                margin: 0;
                -webkit-print-color-adjust: exact;
                /* Ensure background graphics print */
            }

            @page {
                margin: 0;
                size: A4;
            }
        }
    </style>
</head>

<body>

    <div class="page" id="card-container">
    </div>

    <script>
        // Data extracted from your file
        const databaseData = [
            { barcode: "A - 01601", name: "ဦးမျိုးမင်း", nrc: "၅/ပလန(နိုင်)၀၉၃၈၇၇", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01602", name: "ဦးအောင်မောင်လေး", nrc: "၉/မဆန(နိုင်)၀၁၇၅၉၄", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01603", name: "ဦးဟန်ထွန်း", nrc: "၈/ပခက(နိုင်)၁၉၇၆၆၆", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01604", name: "ဦးနေနော်စိုး", nrc: "၅/ဝလန(နိုင်)၁၈၀၀၁၇", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01605", name: "ဦးအောင်ရဲကျော်", nrc: "၉/ခအဇ(နိုင်)၀၃၉၉၁၄", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01606", name: "ဦးဟိန်းဝဏ္ဏအောင်", nrc: "၉/မဟမ(နိုင်)၀၅၇၂၇၂", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01607", name: "ဦးရဲနိုင်", nrc: "၅/ဝလန(နိုင်)၁၆၃၁၂၄", exp: "၁၂/၁၁/၂၀၂၆" },
            { barcode: "A - 01608", name: "ဦးအောင်မင်းခန့်", nrc: "၅/မကန(နိုင်)၃၀၈၆၈၀", exp: "၁၂/၁၁/၂၀၂၆" }
        ];

        const container = document.getElementById('card-container');

        function createCard(user) {
            const safeId = user.barcode.replace(/\s/g, ''); // Remove spaces for ID

            return `
                <div class="card">
                    <div class="barcode-box">
                        <svg id="bc-${safeId}"></svg>
                    </div>
                    
                    <div class="info-box">
                        <div class="info-row">
                            <div class="label">အမည်</div>
                            <div class="val">- ${user.name}</div>
                        </div>
                        <div class="info-row">
                            <div class="label">မှတ်ပုံတင်အမှတ်</div>
                            <div class="val">- ${user.nrc}</div>
                        </div>
                        <div class="info-row">
                            <div class="label">သက်တမ်းကုန်ဆုံးရက်</div>
                            <div class="val">- ${user.exp}</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // 1. Render HTML
        databaseData.forEach(user => {
            container.innerHTML += createCard(user);
        });

        // 2. Generate Barcodes
        databaseData.forEach(user => {
            const safeId = user.barcode.replace(/\s/g, '');
            JsBarcode(`#bc-${safeId}`, user.barcode, {
                format: "CODE128",
                lineColor: "#000",
                width: 2,
                height: 55,      /* INCREASED HEIGHT to match reference */
                displayValue: true, /* Show text below barcode */
                fontSize: 12,
                fontOptions: "bold",
                textMargin: 2,
                background: "rgba(255,255,255,0.8)" /* Slight white bg for readability */
            });
        });
    </script>
</body>

</html>